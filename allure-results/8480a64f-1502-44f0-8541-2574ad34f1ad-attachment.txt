17:42:53 - [36mINFO [0m hunit_test.py setUp:912            
################################################################################
TestRunNotebook2.test_parallel1
################################################################################
17:42:53 - [33mWARN [0m test_run_notebook.py test_parallel1:143                This command is supposed to fail
  ==> [0m[36mINFO[0m: > cmd='/app/dev_scripts/notebooks/run_notebook.py --dst_dir /app/dev_scripts/test/outcomes/TestRunNotebook2.test_parallel1/tmp.scratch --notebook /app/dev_scripts/notebooks/test/simple_notebook.ipynb --config_builder dev_scripts.test.test_run_notebook.build_configs2() --num_threads 2'
  ==> report_memory_usage=False report_cpu_usage=False
  ==> [36mINFO[0m: Saving log to file '/app/dev_scripts/notebooks/run_notebook.py.log'
  ==> 17:42:57 - [36mINFO [0m builder.py get_configs_from_builder:32                 Executing function 'dev_scripts.test.test_run_notebook.build_configs2()'
  ==> 17:42:57 - [36mINFO [0m experiment_utils.py get_configs_from_command_line:201  Generated 3 configs from the builder
  ==> 17:42:57 - [36mINFO [0m experiment_utils.py select_config:177                  Selected 3 configs
  ==> 17:42:57 - [36mINFO [0m experiment_utils.py get_configs_from_command_line:216  Selected 3 configs from command line
  ==> 17:42:57 - [36mINFO [0m experiment_utils.py get_configs_from_command_line:220  Removed 0 configs since already executed
  ==> 17:42:57 - [36mINFO [0m experiment_utils.py get_configs_from_command_line:221  Need to execute 3 configs
  ==> 17:42:57 - [36mINFO [0m run_notebook.py _main:211                              log_file='/app/dev_scripts/test/outcomes/TestRunNotebook2.test_parallel1/tmp.scratch/log.20220628-174257.txt'
  ==> ################################################################################
  ==> Workload
  ==> ################################################################################
  ==> 17:42:57 - [36mINFO [0m hjoblib.py parallel_execute:549                        dry_run=False, num_threads='2', incremental=True, num_attempts=1, abort_on_error=True
  ==> 17:42:57 - [36mINFO [0m hjoblib.py parallel_execute:557                        Saving log info in '/app/dev_scripts/test/outcomes/TestRunNotebook2.test_parallel1/tmp.scratch/log.20220628-174257.txt'
  ==> 17:42:57 - [36mINFO [0m hjoblib.py parallel_execute:558                        Number of executing threads=2 (2)
  ==> 17:42:57 - [36mINFO [0m hjoblib.py parallel_execute:563                        Number of tasks=3
  ==> 17:42:57 - [36mINFO [0m htqdm.py flush:42                  num_threads=2 backend=loky:   0%|          | 0/3 [00:00<?, ?it/s]
  ==> 17:42:57 - [36mINFO [0m hjoblib.py parallel_execute:604                        Using 2 threads, backend='loky'
  ==> [Parallel(n_jobs=2)]: Using backend LokyBackend with 2 concurrent workers.
  ==> Execution failed for experiment 2
  ==> Execution failed
  ==> 
  ==> ################################################################################
  ==> 3/3 (20220628-174306)
  ==> ################################################################################
  ==> 
  ==> tag=3/3 (20220628-174306)
  ==> workload_func=_run_notebook
  ==> func_name=_run_notebook
  ==> args=(fail: True
  ==> id: 2
  ==> meta:
  ==>   id: 2
  ==>   config_builder: dev_scripts.test.test_run_notebook.build_configs2()
  ==>   dst_dir: /app/dev_scripts/test/outcomes/TestRunNotebook2.test_parallel1/tmp.scratch
  ==>   experiment_result_dir: /app/dev_scripts/test/outcomes/TestRunNotebook2.test_parallel1/tmp.scratch/result_2,
  ==>  '/app/dev_scripts/notebooks/test/simple_notebook.ipynb',
  ==>  False)
  ==> kwargs={}
  ==> exception='Execution failed for experiment 2'
  ==> func_res=
  ==>   None
  ==> elapsed_time_in_secs=5.129
  ==> start_ts=20220628-174306
  ==> end_ts=20220628-174311
  ==> error=True
  ==> Aborting since abort_on_error=True
  ==> [Parallel(n_jobs=2)]: Done   1 tasks      | elapsed:    8.8s
  ==> [Parallel(n_jobs=2)]: Done   3 out of   3 | elapsed:   14.1s remaining:    0.0s
  ==> joblib.externals.loky.process_executor._RemoteTraceback: 
  ==> """
  ==> Traceback (most recent call last):
  ==>   File "/venv/lib/python3.8/site-packages/joblib/externals/loky/process_executor.py", line 436, in _process_worker
  ==>     r = call_item()
  ==>   File "/venv/lib/python3.8/site-packages/joblib/externals/loky/process_executor.py", line 288, in __call__
  ==>     return self.fn(*self.args, **self.kwargs)
  ==>   File "/venv/lib/python3.8/site-packages/joblib/_parallel_backends.py", line 595, in __call__
  ==>     return self.func(*args, **kwargs)
  ==>   File "/venv/lib/python3.8/site-packages/joblib/parallel.py", line 262, in __call__
  ==>     return [func(*args, **kwargs)
  ==>   File "/venv/lib/python3.8/site-packages/joblib/parallel.py", line 262, in <listcomp>
  ==>     return [func(*args, **kwargs)
  ==>   File "/app/helpers/hjoblib.py", line 498, in _parallel_execute_decorator
  ==>     raise exception  # noqa: F821
  ==>   File "/app/helpers/hjoblib.py", line 472, in _parallel_execute_decorator
  ==>     res = workload_func(*args, **kwargs)
  ==>   File "/app/dev_scripts/notebooks/run_notebook.py", line 111, in _run_notebook
  ==>     raise RuntimeError(msg)
  ==> RuntimeError: Execution failed for experiment 2
  ==> """
  ==> 
  ==> The above exception was the direct cause of the following exception:
  ==> 
  ==> Traceback (most recent call last):
  ==>   File "/app/dev_scripts/notebooks/run_notebook.py", line 232, in <module>
  ==>     _main(_parse())
  ==>   File "/app/dev_scripts/notebooks/run_notebook.py", line 213, in _main
  ==>     hjoblib.parallel_execute(
  ==>   File "/app/helpers/hjoblib.py", line 610, in parallel_execute
  ==>     res = joblib.Parallel(
  ==>   File "/venv/lib/python3.8/site-packages/joblib/parallel.py", line 1056, in __call__
  ==>     self.retrieve()
  ==>   File "/venv/lib/python3.8/site-packages/joblib/parallel.py", line 935, in retrieve
  ==>     self._output.extend(job.get(timeout=self.timeout))
  ==>   File "/venv/lib/python3.8/site-packages/joblib/_parallel_backends.py", line 542, in wrap_future_result
  ==>     return future.result(timeout=timeout)
  ==>   File "/usr/lib/python3.8/concurrent/futures/_base.py", line 444, in result
  ==>     return self.__get_result()
  ==>   File "/usr/lib/python3.8/concurrent/futures/_base.py", line 389, in __get_result
  ==>     raise self._exception
  ==> RuntimeError: Execution failed for experiment 2
  ==> 17:43:11 - [36mINFO [0m hcache.py clear_global_cache:297                       Before clear_global_cache: 'global mem' cache: path='/mnt/tmpfs/tmp.cache.mem', size=32.0 KB
  ==> 17:43:11 - [33mWARN [0m hcache.py clear_global_cache:298                       Resetting 'global mem' cache '/mnt/tmpfs/tmp.cache.mem'
  ==> 17:43:11 - [33mWARN [0m hcache.py clear_global_cache:308                       Destroying '/mnt/tmpfs/tmp.cache.mem' ...
  ==> 17:43:11 - [36mINFO [0m hcache.py clear_global_cache:319                       After clear_global_cache: 'global mem' cache: path='/mnt/tmpfs/tmp.cache.mem', size=nan
  ==> --- Logging error ---
  ==> Traceback (most recent call last):
  ==>   File "/usr/lib/python3.8/logging/__init__.py", line 1085, in emit
  ==>     msg = self.format(record)
  ==>   File "/usr/lib/python3.8/logging/__init__.py", line 929, in format
  ==>     return fmt.format(record)
  ==>   File "/app/helpers/hlogging.py", line 532, in format
  ==>     msg += self._get_wall_clock_time()
  ==>   File "/app/helpers/hlogging.py", line 626, in _get_wall_clock_time
  ==>     return self._convert_time_to_string(dt, self._date_fmt)
  ==>   File "/app/helpers/hlogging.py", line 607, in _convert_time_to_string
  ==>     time_as_str = dt.strftime(date_fmt)
  ==> ImportError: sys.meta_path is None, Python is likely shutting down
  ==> Call stack:
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/std.py", line 1162, in __del__
  ==>     self.close()
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/std.py", line 1316, in close
  ==>     self.display(pos=0)
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/std.py", line 1509, in display
  ==>     self.sp(self.__str__() if msg is None else msg)
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/std.py", line 350, in print_status
  ==>     fp_write('\r' + s + (' ' * max(last_len[0] - len_s, 0)))
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/std.py", line 344, in fp_write
  ==>     fp_flush()
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/utils.py", line 145, in inner
  ==>     return func(*args, **kwargs)
  ==>   File "/app/helpers/htqdm.py", line 42, in flush
  ==>     self.logger.log(self.level, self.buf)
  ==> Message: 'num_threads=2 backend=loky:   0%|          | 0/3 [00:14<?, ?it/s]'
  ==> Arguments: ()
  ==> Exception ignored in: <function tqdm.__del__ at 0x7f97a291e0d0>
  ==> Traceback (most recent call last):
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/std.py", line 1162, in __del__
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/std.py", line 1316, in close
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/std.py", line 1509, in display
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/std.py", line 350, in print_status
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/std.py", line 344, in fp_write
  ==>   File "/venv/lib/python3.8/site-packages/tqdm/utils.py", line 145, in inner
  ==>   File "/app/helpers/htqdm.py", line 42, in flush
  ==>   File "/usr/lib/python3.8/logging/__init__.py", line 1512, in log
  ==>   File "/usr/lib/python3.8/logging/__init__.py", line 1589, in _log
  ==>   File "/usr/lib/python3.8/logging/__init__.py", line 1599, in handle
  ==>   File "/usr/lib/python3.8/logging/__init__.py", line 1661, in callHandlers
  ==>   File "/usr/lib/python3.8/logging/__init__.py", line 954, in handle
  ==>   File "/usr/lib/python3.8/logging/__init__.py", line 1186, in emit
  ==>   File "/usr/lib/python3.8/logging/__init__.py", line 1176, in _open
  ==> NameError: name 'open' is not defined
